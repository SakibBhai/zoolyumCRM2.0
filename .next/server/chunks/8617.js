"use strict";exports.id=8617,exports.ids=[8617],exports.modules={88617:(e,s,r)=>{r.d(s,{MainLayout:()=>U});var t=r(37022),a=r(24619),i=r(83855),n=r(77845),l=r.n(n),o=r(6136),c=r(62655),d=r(88516),m=r(55255),x=r(2490),u=r(1706),h=r(19885),g=r(50277),f=r(22947),p=r(23320),b=r(36866),v=r(95529),N=r(72795),y=r(78322),j=r(39325),A=r(10525);let w=[{title:"Dashboard",href:"/dashboard",icon:m.A},{title:"Leads",href:"/leads",icon:x.A},{title:"Clients",href:"/clients",icon:u.A},{title:"Projects",href:"/projects",icon:h.A},{title:"Tasks",href:"/tasks",icon:g.A},{title:"Team",href:"/team",icon:f.A,roles:["ADMIN","MANAGER"]},{title:"Proposals",href:"/proposals",icon:p.A},{title:"Finance",href:"/finance",icon:b.A,roles:["ADMIN","MANAGER"]},{title:"Reports",href:"/reports",icon:v.A,roles:["ADMIN","MANAGER"]}];function E(){let[e,s]=(0,i.useState)(!1),r=(0,o.usePathname)(),{user:n,hasRole:m,signOut:x}=(0,a.A)(),u=w.filter(e=>!e.roles||e.roles.some(e=>m(e)));return(0,t.jsxs)(t.Fragment,{children:[!e&&(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>s(!0)}),(0,t.jsxs)("div",{className:(0,c.cn)("fixed left-0 top-0 z-50 h-full bg-white border-r border-gray-100 transition-all duration-300 shadow-sm",e?"-translate-x-full lg:w-16 lg:translate-x-0":"w-64 translate-x-0 lg:w-64"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[!e&&(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-sm",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:"AC"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold text-gray-900 text-lg",children:"AgencyCRM"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Professional Edition"})]})]}),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>s(!e),className:"lg:hidden hover:bg-gray-100",children:e?(0,t.jsx)(N.A,{className:"h-5 w-5"}):(0,t.jsx)(y.A,{className:"h-5 w-5"})})]}),(0,t.jsx)("nav",{className:"flex-1 p-6 space-y-2",children:u.map(a=>{let i=r===a.href||r.startsWith(a.href+"/"),n=a.icon;return(0,t.jsxs)(l(),{href:a.href,className:(0,c.cn)("flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 group",i?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900",e&&"justify-center px-3"),onClick:()=>s(!0),children:[(0,t.jsx)(n,{className:(0,c.cn)("h-5 w-5 transition-colors duration-200",i?"text-blue-700":"text-gray-500 group-hover:text-gray-700")}),!e&&(0,t.jsx)("span",{className:"font-medium",children:a.title}),!e&&i&&(0,t.jsx)("div",{className:"ml-auto w-2 h-2 bg-blue-600 rounded-full"})]},a.href)})}),(0,t.jsxs)("div",{className:"p-6 border-t border-gray-100 space-y-3",children:[(0,t.jsxs)(l(),{href:"/settings",className:(0,c.cn)("flex items-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 group","/settings"===r?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900",e&&"justify-center px-3"),children:[(0,t.jsx)(j.A,{className:(0,c.cn)("h-5 w-5 transition-colors duration-200","/settings"===r?"text-blue-700":"text-gray-500 group-hover:text-gray-700")}),!e&&(0,t.jsx)("span",{className:"font-medium",children:"Settings"})]}),(0,t.jsxs)(d.$,{variant:"ghost",onClick:x,className:(0,c.cn)("w-full justify-start space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 text-gray-600 hover:bg-red-50 hover:text-red-700 group",e&&"justify-center px-3"),children:[(0,t.jsx)(A.A,{className:"h-5 w-5 transition-colors duration-200 text-gray-500 group-hover:text-red-600"}),!e&&(0,t.jsx)("span",{className:"font-medium",children:"Sign Out"})]}),!e&&n&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-full flex items-center justify-center shadow-sm",children:(0,t.jsx)("span",{className:"text-white font-semibold text-sm",children:n.name?.charAt(0).toUpperCase()||"U"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",children:n.name||"Demo User"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:n.email||"demo@agency.com"})]})]})})]})]}),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-40 lg:hidden",onClick:()=>s(!1),children:(0,t.jsx)(N.A,{className:"h-6 w-6"})})]})}var R=r(26800);function U({children:e}){let{user:s,isLoading:r}=(0,a.A)();return r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(R.A,{className:"h-8 w-8 animate-spin"})}):s?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(E,{}),(0,t.jsx)("main",{className:"lg:ml-64 min-h-screen",children:(0,t.jsx)("div",{className:"p-4 lg:p-5 w-full",children:e})})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to access this page."}),(0,t.jsx)("a",{href:"/auth/signin",className:"text-blue-600 hover:text-blue-800 underline",children:"Sign In"})]})})}},88516:(e,s,r)=>{r.d(s,{$:()=>c});var t=r(37022),a=r(83855),i=r(39386),n=r(48013),l=r(62655);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...n},c)=>{let d=a?i.DX:"button";return(0,t.jsx)(d,{className:(0,l.cn)(o({variant:s,size:r,className:e})),ref:c,...n})});c.displayName="Button"},24619:(e,s,r)=>{r.d(s,{A:()=>x});var t=r(17695),a=r(96330),i=r(79081),n=r(74724),l=r(67747);let o=globalThis.prisma??new a.PrismaClient({log:["query"]});var c=r(24546);let d="true"===process.env.AUTH_BYPASS_ENABLED;function m(e,s){let r={[a.UserRole.VIEWER]:0,[a.UserRole.AGENT]:1,[a.UserRole.MANAGER]:2,[a.UserRole.ADMIN]:3};return r[e]>=r[s]}function x(){let{data:e,status:s}=(0,t.useSession)(),r=!!e?.user,i=e?.user,n=e=>!!i?.role&&m(i.role,e);return{user:i,isLoading:"loading"===s,isAuthenticated:r,hasRole:n,canAccess:(e,s=a.UserRole.AGENT)=>!!(i?.id&&i?.role)&&function(e,s,r,t=a.UserRole.AGENT){return!!m(e,a.UserRole.MANAGER)||!!r&&s===r||m(e,t)}(i.role,i.id,e,s),isAdmin:()=>n(a.UserRole.ADMIN),isManager:()=>n(a.UserRole.MANAGER),isAgent:()=>n(a.UserRole.AGENT),isViewer:()=>n(a.UserRole.VIEWER)}}(0,i.y)(o),(0,l.A)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,n.A)({name:"credentials",credentials:{email:{label:"Email",type:"email",placeholder:"john@example.com"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;if(d){console.warn("\uD83D\uDEA8 AUTH BYPASS MODE ENABLED - DEVELOPMENT ONLY!");let e=await o.user.findFirst({where:{role:a.UserRole.ADMIN,isActive:!0},select:{id:!0,email:!0,name:!0,role:!0,avatar:!0}});return e?{id:e.id,email:e.email,name:e.name,role:e.role,avatar:e.avatar}:{id:"bypass-user",email:"bypass@agency.com",name:"Bypass User (DEV)",role:a.UserRole.ADMIN,avatar:null}}let s=await o.user.findUnique({where:{email:e.email},select:{id:!0,email:!0,name:!0,password:!0,role:!0,avatar:!0,isActive:!0}});return s&&s.isActive&&s.password&&await (0,c.compare)(e.password,s.password)?{id:s.id,email:s.email,name:s.name,role:s.role,avatar:s.avatar}:null}})}};